<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>IftarFlow â€” Order Status</title>
  <link rel="stylesheet" href="styles.css"/>
</head>
<body>

<!-- NAVBAR -->
<nav class="navbar">
  <a class="nav-brand" href="dashboard.html">
    <div class="nav-logo">IF</div>
    <span class="nav-logo-text">Iftar<span>Flow</span></span>
  </a>
  <div class="nav-links">
    <a href="dashboard.html">â¬¡ Home</a>
    <a href="menu.html">ğŸ½ Menu</a>
    <a href="cart.html" class="cart-link">
      ğŸ›’ Cart
      <span class="cart-badge" id="nav-cart-count" style="display:none">0</span>
    </a>
    <a href="status.html" class="active">ğŸ“¡ Status</a>
    <a href="profile.html">ğŸ‘¤ Profile</a>
    <a href="login.html" class="logout">â» Logout</a>
  </div>
  <div class="nav-right">
    <span class="nav-user">Signed in as <strong id="nav-user-email">â€”</strong></span>
  </div>
</nav>

<div class="page-wrap">

  <div class="page-header reveal">
    <h1 class="page-title"><em>Live Order</em> Tracking ğŸ“¡</h1>
    <p class="page-subtitle">
      Watch your order travel through distributed microservices in real-time.
      Each step represents a service boundary â€” failures at any point are handled gracefully.
    </p>
  </div>

  <div class="grid-2">

    <!-- LEFT: TRACKER -->
    <div>

      <!-- Order ID -->
      <div class="order-id-box reveal" id="order-id-box">
        <span class="text-muted" style="font-size:.65rem; text-transform:uppercase; letter-spacing:.08em;">Current Order</span><br/>
        <strong id="current-order-id">No active order</strong>
        <span id="order-item-tag" style="margin-left:.75rem;"></span>
      </div>

      <!-- Status pill -->
      <div id="status-pill-wrap" class="mb-2">
        <span class="status-pill tag-muted" id="status-pill" style="background:var(--s2); border:1px solid var(--border); color:var(--text2);">
          AWAITING ORDER
        </span>
      </div>

      <!-- ETA Box -->
      <div class="eta-box reveal" id="eta-box" style="display:none;">
        <div class="eta-icon">â±</div>
        <div>
          <div class="eta-label">Estimated Ready In</div>
          <div class="eta-value" id="eta-val">â€”</div>
        </div>
      </div>

      <!-- 4-Step Tracker -->
      <div class="card reveal" style="margin-bottom:1.5rem;">
        <div class="section-label">Order Journey â€” Microservice Flow</div>
        <div class="tracker-container">
          <div class="tracker-step" id="step-0">
            <div class="step-node">â—‹</div>
            <div class="step-label">Pending</div>
          </div>
          <div class="tracker-step" id="step-1">
            <div class="step-node">â—‹</div>
            <div class="step-label">Stock<br/>Verified</div>
          </div>
          <div class="tracker-step" id="step-2">
            <div class="step-node">â—‹</div>
            <div class="step-label">In Kitchen<br/>Queue</div>
          </div>
          <div class="tracker-step" id="step-3">
            <div class="step-node">ğŸ½</div>
            <div class="step-label">Ready for<br/>Pickup!</div>
          </div>
        </div>
      </div>

      <!-- Notification message -->
      <div class="notif-box reveal" id="notif-box">
        <span class="text-muted">Place an order from the </span>
        <a href="cart.html" style="color:var(--gold); text-decoration:none;">cart page</a>
        <span class="text-muted"> to begin live tracking.</span>
      </div>

      <!-- Action buttons -->
      <div style="display:flex; gap:.75rem; margin-top:1.5rem;">
        <a href="menu.html" class="btn btn-secondary" style="flex:1; display:flex; justify-content:center;">â† Back to Menu</a>
        <a href="cart.html" class="btn btn-primary" style="flex:1; display:flex; justify-content:center;">Go to Cart â†’</a>
      </div>
    </div>

    <!-- RIGHT: LOG + SERVICE STATUS -->
    <div>
      <div class="section-label reveal">Kitchen Queue Log â€” Real-Time</div>
      <div class="card reveal mb-3">
        <div class="live-log" id="live-log">
          <div class="log-entry log-info">
            <span class="log-ts">[SYS]</span>
            <span class="log-msg">CafOS Notification Hub connected. Awaiting events...</span>
          </div>
        </div>
      </div>

      <!-- SERVICE STATUS GRID -->
      <div class="section-label reveal">Microservice Health â€” Live</div>
      <div id="service-health-grid" style="display:grid; grid-template-columns:1fr 1fr; gap:.75rem;">
        <!-- Populated by JS -->
      </div>

      <!-- ORDER HISTORY -->
      <div class="section-label mt-3 reveal">Session Order History</div>
      <div id="order-history" style="font-size:.75rem;">
        <div class="text-muted text-sm" id="history-empty">No orders placed this session.</div>
      </div>
    </div>

  </div>
</div>

<script src="app.js"></script>
</body>
</html>